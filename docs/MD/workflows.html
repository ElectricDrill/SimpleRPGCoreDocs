<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title> | Simple RPG Core </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content=" | Simple RPG Core ">
      
      
      <link rel="icon" href="../images/favico.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/ElectricDrill/SimpleRPGCoreDocs/blob/main/DocFx/MD/workflows.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../images/simple-rpg-core-logo.png" alt="Simple RPG Core">
            Simple RPG Core
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">

<p>-# Workflows</p>
<!--
======UTILITIES
- Game Events as SOs
- Int and Long Vars
- Int and Long Refs
- Growth Formulas

======ENTITY
- Make a GameObject an entity
- EntityLevel

======ATTRIBUTES
- Create some Attributes
- Create an AttributeSet
    - Assign Attributes to an AttributeSet
- Add EntityAttributes to an entity

======STATS
- Create some Stats
- Create a StatSet
    - Assign Stats to a StatSet
- Add EntityStats to an entity

======CLASS
- Create a class
- Add EntityClass to an entity

======SCALING FORMULA
- ScalingFormulas
- StatsScalingComponent
- AttributesScalingComponent
-->
<h2 id="some-utilities">Some utilities</h2>
<p>Pressoche' ogni classe fornita da questo package utilizza degli eventi o delle variabili sotto forma di <code>ScriptableObject</code>. Pertanto introduciamo rapidamente questi concetti cosi' da aver chiaro di cosa stiamo parlando quando li ritroveremo nei prossimi paragrafi.</p>
<h3 id="game-events-as-scriptableobjects">Game events as <code>ScriptableObjects</code></h3>
<p>L'architettura SOAP ci permette di implementare l'Observer pattern attraverso gli scriptable objects. Nel caso piu' semplice, ovvero con eventi senza context, possiamo definire diversi game event come istanze <code>GameEvent</code>: una classe che deriva da <code>ScriptableObjcet</code>. Ad esempio possiamo creare un'istanza chiamata <code>PlayerJumped</code> che rappresenta l’evento “Il giocatore ha effettuato un salto”. Questo evento si occuperà di notificare tutti i sistemi in ascolto quando esso si verifica.
I sistemi si sottoscrivono a questo evento utilizzando il <code>MonoBehaviour</code> <code>GameEventListener</code>. Possiamo assegnare a questo componente un <code>GameEvent</code>, ed esso si occupera' di effettuare la sottoscrizione e di invocare una callback quando l'evento viene invocato. La callback e' un <a href="https://docs.unity3d.com/ScriptReference/Events.UnityEvent.html">UnityEvent</a>, pertanto potremo selezionare una callback da invocare in risposta al nostro evento direttamente dall'inspector.</p>
<p>Il package supporta anche game event con fino a 4 parametri di contesto. Essi sono dei Generics, ma in Unity non è possibile stanziare classi che derivano da ScriptableObject se sono dei generici con parametri di tipo non specificati. Per usarli dobbiamo quindi dichiarare esplicitamente delle classi che derivano dai GameEvent generici e che fissano i parametri di tipo con dei tipi concreti. Per semplificare la definizione di nuovi tipi di evento, quindi con degli specifici tipi come parametri di contesto, il package mette a disposizione i <code>GameEventGenerator</code>. Questi generatori, che derivano da SO, permettono di generare le classi concrete dei <code>GameEvent</code>.
Vedremo più in dettaglio questi generatori nella sezione (TODO)
Alcuni game event sono gia' definiti e resi disponibili dal package (vedi la pagina <a href="samples.html">Samples</a>).</p>
<h3 id="int-and-long-vars">Int and Long Vars</h3>
<p>Un’altro comune utilizzo degli <code>ScriptableObject</code> nella SOAP architecture è per definire delle variabili. Il maggiore vantaggio di queste variabili sotto forma di SO è che possono venire facilmente condivise tra vari oggetti che magari decidano condividere lo stesso valore. Un comune esempio è il punteggio di gioco del giocatore. Potrebbe esserci il game manager che aggiunge o toglie punti a questa variabile, mentre l’HUD della UI lo utilizza per mostrare a video il suo valore. In questo modo riusciamo a mantenere game manager e UI completamente disaccoppiate, passando i valori condivisi (come le variabili) attraverso l'inspector.</p>
<h3 id="int-and-long-refs">Int and Long Refs</h3>
<p><code>IntRef</code> e <code>LongRef</code> permettono di scegliere se usare un valore nativo (<code>int</code> o <code>long</code>) o se usare un <code>IntVar</code>/<code>LongVar</code>. Come abbiamo detto nel paragrafo precedente, gli <code>IntVar</code> e <code>LongVar</code> hanno il vantaggio di essere condivisibili tra diverse componenti/oggetti di gioco, mentre i valori nativi sono piu' immediati da usare e richiedono meno setup (non serve istanziare un'istanza di un <code>IntVar</code>/<code>LongVar</code> e assegnarla nell'inspector).</p>
<p>Grazie a un custom property drawer sara' possibile, dall'inspector, spuntare un checkbox nominato <code>Use constant</code> per utilizzare un valore nativo anziche' un -<code>Ref</code>, e viceversa.</p>
<p><code>IntRef</code> e <code>LongRef</code> sono ampiamente utilizzati nei <code>MonoBheaviour</code> del pacakge.</p>
<h3 id="growth-formulas">Growth Formulas</h3>
<p>Come gia' menzionate in <a href="introduction.html">Introduction</a>, le <code>GrowthFormula</code> permttono di definire come un certo valore varia al crescere dei livelli. Una <code>GrowthFormula</code> puo' venire istanziata attraverso il menu di contesto della gerarchia andando su <code>Simple RPG Core -&gt; Grwoth Formula</code>.<br>
Il package mette a disposizione un custom property drawer per le <code>GrowthFormula</code>.</p>
<h4 id="max-level-for-the-values">Max level for the values</h4>
<p>Nell'inspector di una <code>GrowthFormula</code> possiamo infatti passare un <code>IntVar</code> per definire fino a che livello far crescere i valori.</p>
<h4 id="use-constant-at-level-one">Use constant at level one</h4>
<p>If the checkbox named <code>Use constant value at level 1</code> is checked, the respective constant value will be used.</p>
<h4 id="growth-equations">Growth equations</h4>
<p>The various values of the <code>GrowthFormula</code> are defined by a function where values, the y axis, are expressed in function of the levels, the x axis. Such funtion is defined as a system of equations. Each equation is a string that associates a math expression to a range of levels.
The string can be defined by using the <a href="https://docs.unity3d.com/6000.0/Documentation/ScriptReference/ExpressionEvaluator.html">Unity ExpressionEvaluator</a> syntax. On top of it, the following terms can be used:</p>
<ul>
<li><code>LVL</code>: the level at each iteration</li>
<li><code>PRV</code>: the previous value of the <code>GrowthFormula</code> (value evaluated at the previous level)</li>
<li><code>SPRV</code>: the second previous value of the <code>GrowthFormula</code> (value evaluated 2 levels ago)</li>
<li><code>SUM</code>: the sum of the values of the <code>GrowthFormula</code> from level 1 up to the previous level</li>
</ul>
<h2 id="make-a-gameobject-an-entity">Make a <code>GameObject</code> an entity</h2>
<p>Per rendere un <code>GameObject</code> un'entita' dobbiamo aggiungere il <code>MonoBehaviour</code> <code>EntityCore</code> ad esso. Seleziona il tuo oggetto dalla gerarchia e clicca, nell'inspector, su &quot;Add component&quot;. quindi cerca e seleziona <code>EntityCore</code>.
<img src="../images/workflows/entity-core-editor.png" alt="Entity Core Custom Editor"><br>
<em>Image - Entity Core Custom Editor</em></p>
<p>Dall'inspector possiamo configurare una serie di valori. Analizziamoli uno alla volta.</p>
<p><code>Level</code>: definisce il livello dell'entita'. Cambiando il suo valore, possiamo assegnare un livello diverso all'entita' direttamente dall'inspector. Questo puo' essere utile per ai fini di testing.
Noterete il check box <code>Use Constant</code>. Se lo spuntate, potrete passare una <code>IntVar</code> anziche' usare una costante.
<code>Current Total Experience</code>: Rappresenta l'esperienza totale posseduta dell'entita'. Questo valore, qualora <code>Use constant</code> sia spuntato, e' readonly.</p>
<div class="WARNING">
<h5>Warning</h5>
<p>Se avete invece passato una <code>LongRef</code>, il valore contenuto in tale variabile non dovrebbe venire modificato a mano.</p>
</div>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/ElectricDrill/SimpleRPGCoreDocs/blob/main/DocFx/MD/workflows.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
